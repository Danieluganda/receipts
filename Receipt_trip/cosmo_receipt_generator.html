<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmo Coffee Shop - Receipt Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #f0f0f0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 30px;
        }

        .form-section {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .receipt-section {
            flex: 1;
        }

        /* Actual thermal receipt size - 80mm width */
        .receipt {
            width: 80mm;
            background: white;
            padding: 5mm;
            font-size: 11pt;
            line-height: 1.4;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            margin: 0 auto 20px;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .form-section {
                display: none;
            }
            .container {
                display: block;
            }
            .receipt {
                width: 80mm;
                box-shadow: none;
                margin: 0;
                page-break-after: always;
            }
            .no-print {
                display: none;
            }
        }

        .receipt-header {
            text-align: center;
            border-bottom: 2px dashed #000;
            padding-bottom: 5mm;
            margin-bottom: 5mm;
        }

        .receipt-title {
            font-size: 16pt;
            font-weight: bold;
            margin-bottom: 2mm;
        }

        .receipt-subtitle {
            font-size: 10pt;
            margin-bottom: 1mm;
        }

        .receipt-info {
            font-size: 9pt;
            margin-bottom: 1mm;
        }

        .receipt-meta {
            display: flex;
            justify-content: space-between;
            font-size: 9pt;
            margin-bottom: 2mm;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin: 5mm 0;
            font-size: 10pt;
        }

        .items-table th {
            text-align: left;
            border-bottom: 1px solid #000;
            padding-bottom: 2mm;
            padding-top: 2mm;
        }

        .items-table td {
            padding: 2mm 0;
            border-bottom: 1px dashed #ccc;
        }

        .items-table .text-right {
            text-align: right;
        }

        .items-table .text-center {
            text-align: center;
        }

        .total-row {
            font-weight: bold;
            font-size: 11pt;
            border-top: 2px solid #000 !important;
            border-bottom: 2px solid #000 !important;
        }

        .receipt-footer {
            text-align: center;
            border-top: 2px dashed #000;
            padding-top: 5mm;
            margin-top: 5mm;
            font-size: 10pt;
        }

        .payment-method {
            text-align: center;
            font-weight: bold;
            margin: 3mm 0;
            font-size: 10pt;
        }

        /* Form Styles */
        h2 {
            margin-bottom: 20px;
            color: #333;
            font-family: Arial, sans-serif;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-family: Arial, sans-serif;
            font-size: 14px;
        }

        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: Arial, sans-serif;
        }

        .item-entry {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 10px;
            position: relative;
        }

        .item-entry h4 {
            margin-bottom: 10px;
            font-family: Arial, sans-serif;
        }

        .item-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        button {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-family: Arial, sans-serif;
        }

        button:hover {
            background: #45a049;
        }

        .btn-secondary {
            background: #2196F3;
        }

        .btn-secondary:hover {
            background: #0b7dda;
        }

        .btn-danger {
            background: #f44336;
        }

        .btn-danger:hover {
            background: #da190b;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Form Section -->
        <div class="form-section">
            <h2>Receipt Details</h2>
            
            <div class="form-group">
                <label>Receipt Number:</label>
                <input type="text" id="receiptNo" value="CS-00101" placeholder="CS-00101">
            </div>

            <div class="form-group">
                <label>Date:</label>
                <input type="date" id="receiptDate">
            </div>

            <div class="form-group">
                <label>Time:</label>
                <input type="time" id="receiptTime" value="13:30">
            </div>

            <div class="form-group">
                <label>Server Name:</label>
                <input type="text" id="serverName" placeholder="Jane Doe">
            </div>

            <div class="form-group">
                <label>Meal Type:</label>
                <select id="mealType">
                    <option value="Lunch">Lunch</option>
                    <option value="Dinner">Dinner</option>
                    <option value="Breakfast">Breakfast</option>
                </select>
            </div>

            <h3 style="margin: 20px 0 10px; font-family: Arial;">Items</h3>
            <div id="itemsContainer">
                <div class="item-entry">
                    <div class="item-row">
                        <div>
                            <label>Item Name:</label>
                            <input type="text" class="item-name" placeholder="Main Course" value="Main Course (Chicken)">
                        </div>
                        <div>
                            <label>Qty:</label>
                            <input type="number" class="item-qty" value="1" min="1">
                        </div>
                        <div>
                            <label>Price:</label>
                            <input type="number" class="item-price" value="15000" min="0">
                        </div>
                        <div>
                            <label>Amount:</label>
                            <input type="number" class="item-amount" value="15000" readonly style="background: #e9e9e9;">
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button onclick="addItem()">+ Add Item</button>
                <button class="btn-secondary" onclick="generateReceipt()">Generate Receipt</button>
                <button class="btn-secondary" onclick="window.print()">Print Receipt</button>
            </div>

            <div class="form-group" style="margin-top: 20px;">
                <label>Total Amount:</label>
                <input type="number" id="totalAmount" value="25000" readonly style="background: #e9e9e9; font-weight: bold; font-size: 16px;">
            </div>
        </div>

        <!-- Receipt Preview Section -->
        <div class="receipt-section">
            <h2 class="no-print" style="text-align: center; margin-bottom: 20px; font-family: Arial;">Receipt Preview</h2>
            <div id="receiptPreview"></div>
        </div>
    </div>

    <script>
        // Set today's date as default
        document.getElementById('receiptDate').valueAsDate = new Date();

        function calculateItemAmount(itemEntry) {
            const qty = parseFloat(itemEntry.querySelector('.item-qty').value) || 0;
            const price = parseFloat(itemEntry.querySelector('.item-price').value) || 0;
            const amount = qty * price;
            itemEntry.querySelector('.item-amount').value = amount;
            calculateTotal();
        }

        function calculateTotal() {
            const items = document.querySelectorAll('.item-entry');
            let total = 0;
            items.forEach(item => {
                const amount = parseFloat(item.querySelector('.item-amount').value) || 0;
                total += amount;
            });
            document.getElementById('totalAmount').value = total;
        }

        function addItem() {
            const container = document.getElementById('itemsContainer');
            const itemEntry = document.createElement('div');
            itemEntry.className = 'item-entry';
            itemEntry.innerHTML = `
                <div class="item-row">
                    <div>
                        <label>Item Name:</label>
                        <input type="text" class="item-name" placeholder="Item name">
                    </div>
                    <div>
                        <label>Qty:</label>
                        <input type="number" class="item-qty" value="1" min="1">
                    </div>
                    <div>
                        <label>Price:</label>
                        <input type="number" class="item-price" value="0" min="0">
                    </div>
                    <div>
                        <label>Amount:</label>
                        <input type="number" class="item-amount" value="0" readonly style="background: #e9e9e9;">
                    </div>
                </div>
                <button class="btn-danger" onclick="this.parentElement.remove(); calculateTotal();" style="margin-top: 10px;">Remove Item</button>
            `;
            container.appendChild(itemEntry);

            // Add event listeners to new item
            itemEntry.querySelector('.item-qty').addEventListener('input', () => calculateItemAmount(itemEntry));
            itemEntry.querySelector('.item-price').addEventListener('input', () => calculateItemAmount(itemEntry));
        }

        // Add event listeners to initial items
        document.querySelectorAll('.item-entry').forEach(item => {
            item.querySelector('.item-qty').addEventListener('input', () => calculateItemAmount(item));
            item.querySelector('.item-price').addEventListener('input', () => calculateItemAmount(item));
        });

        function generateReceipt() {
            const receiptNo = document.getElementById('receiptNo').value;
            const date = new Date(document.getElementById('receiptDate').value).toLocaleDateString('en-GB');
            const time = document.getElementById('receiptTime').value;
            const server = document.getElementById('serverName').value || '[Server Name]';
            const mealType = document.getElementById('mealType').value;
            const total = parseFloat(document.getElementById('totalAmount').value) || 0;

            // Get all items
            const items = [];
            document.querySelectorAll('.item-entry').forEach(entry => {
                const name = entry.querySelector('.item-name').value;
                const qty = entry.querySelector('.item-qty').value;
                const price = parseFloat(entry.querySelector('.item-price').value);
                const amount = parseFloat(entry.querySelector('.item-amount').value);
                if (name && qty && price) {
                    items.push({ name, qty, price, amount });
                }
            });

            // Generate receipt HTML
            let itemsHTML = '';
            items.forEach(item => {
                itemsHTML += `
                    <tr>
                        <td>${item.name}</td>
                        <td class="text-center">${item.qty}</td>
                        <td class="text-right">${item.price.toLocaleString()}</td>
                        <td class="text-right">${item.amount.toLocaleString()}</td>
                    </tr>
                `;
            });

            const receiptHTML = `
                <div class="receipt">
                    <div class="receipt-header">
                        <div class="receipt-title">â˜• COSMO COFFEE SHOP</div>
                        <div class="receipt-subtitle">& RESTAURANT</div>
                        <div class="receipt-info">Tororo Town, Eastern Uganda</div>
                        <div class="receipt-info">Tel: +256-762 681100</div>
                    </div>

                    <div class="receipt-meta">
                        <div>Receipt: ${receiptNo}</div>
                        <div>${date}</div>
                    </div>
                    <div class="receipt-meta">
                        <div>Server: ${server}</div>
                        <div>${time}</div>
                    </div>
                    <div style="text-align: center; margin: 3mm 0; font-size: 10pt; font-weight: bold;">
                        ${mealType}
                    </div>

                    <table class="items-table">
                        <thead>
                            <tr>
                                <th>ITEM</th>
                                <th class="text-center">QTY</th>
                                <th class="text-right">PRICE</th>
                                <th class="text-right">AMT</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${itemsHTML}
                            <tr class="total-row">
                                <td colspan="3">TOTAL</td>
                                <td class="text-right">UGX ${total.toLocaleString()}</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="payment-method">
                        PAYMENT: CASH
                    </div>

                    <div class="receipt-footer">
                        <div style="font-weight: bold; margin-bottom: 2mm;">ðŸ’š Thank You! ðŸ’š</div>
                        <div style="font-size: 9pt;">Please Come Again</div>
                        <div style="font-size: 8pt; margin-top: 3mm;">-------</div>
                    </div>
                </div>
            `;

            document.getElementById('receiptPreview').innerHTML = receiptHTML;
        }

        // Generate initial receipt
        generateReceipt();
    </script>
</body>
</html>