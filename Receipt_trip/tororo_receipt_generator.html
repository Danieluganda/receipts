<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tororo Service Station - Receipt Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #f0f0f0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 30px;
        }

        .form-section {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .receipt-section {
            flex: 1;
        }

        /* Actual thermal receipt size - 80mm width */
        .receipt {
            width: 80mm;
            background: white;
            padding: 5mm;
            font-size: 10pt;
            line-height: 1.3;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            margin: 0 auto 20px;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .form-section {
                display: none;
            }
            .container {
                display: block;
            }
            .receipt {
                width: 80mm;
                box-shadow: none;
                margin: 0;
                page-break-after: always;
            }
            .no-print {
                display: none;
            }
        }

        .receipt-header {
            text-align: center;
            border-bottom: 2px solid #000;
            padding-bottom: 4mm;
            margin-bottom: 4mm;
        }

        .receipt-title {
            font-size: 14pt;
            font-weight: bold;
            margin-bottom: 1mm;
        }

        .receipt-subtitle {
            font-size: 10pt;
            font-weight: bold;
            margin-bottom: 1mm;
        }

        .receipt-info {
            font-size: 8pt;
            margin-bottom: 0.5mm;
        }

        .divider {
            text-align: center;
            margin: 3mm 0;
            font-size: 10pt;
        }

        .receipt-meta {
            display: flex;
            justify-content: space-between;
            font-size: 9pt;
            margin-bottom: 2mm;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin: 4mm 0;
            font-size: 9pt;
        }

        .items-table th {
            text-align: left;
            border-top: 1px solid #000;
            border-bottom: 1px solid #000;
            padding: 2mm 0;
            font-weight: bold;
        }

        .items-table td {
            padding: 1.5mm 0;
        }

        .items-table .text-right {
            text-align: right;
        }

        .items-table .text-center {
            text-align: center;
        }

        .items-table .item-code {
            font-size: 7pt;
            color: #666;
        }

        .summary-row {
            border-top: 1px dashed #000;
            padding-top: 2mm;
        }

        .total-row {
            font-weight: bold;
            font-size: 11pt;
            border-top: 2px solid #000 !important;
            border-bottom: 2px solid #000 !important;
            padding: 2mm 0 !important;
        }

        .receipt-footer {
            text-align: center;
            border-top: 2px solid #000;
            padding-top: 4mm;
            margin-top: 4mm;
            font-size: 9pt;
        }

        .items-count {
            text-align: center;
            font-size: 8pt;
            margin: 3mm 0;
        }

        /* Form Styles */
        h2 {
            margin-bottom: 20px;
            color: #333;
            font-family: Arial, sans-serif;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-family: Arial, sans-serif;
            font-size: 14px;
        }

        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            font-family: Arial, sans-serif;
        }

        .item-entry {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        .item-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        button {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-family: Arial, sans-serif;
        }

        button:hover {
            background: #45a049;
        }

        .btn-secondary {
            background: #2196F3;
        }

        .btn-secondary:hover {
            background: #0b7dda;
        }

        .btn-danger {
            background: #f44336;
        }

        .btn-danger:hover {
            background: #da190b;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Form Section -->
        <div class="form-section">
            <h2>Receipt Details</h2>
            
            <div class="form-group">
                <label>Receipt Number:</label>
                <input type="text" id="receiptNo" value="TSS-12345" placeholder="TSS-12345">
            </div>

            <div class="form-group">
                <label>Date:</label>
                <input type="date" id="receiptDate">
            </div>

            <div class="form-group">
                <label>Time:</label>
                <input type="time" id="receiptTime" value="16:20">
            </div>

            <div class="form-group">
                <label>Cashier Name:</label>
                <input type="text" id="cashierName" placeholder="John Doe">
            </div>

            <h3 style="margin: 20px 0 10px; font-family: Arial;">Items</h3>
            <div id="itemsContainer">
                <div class="item-entry">
                    <div class="item-row">
                        <div>
                            <label>Item Name:</label>
                            <input type="text" class="item-name" placeholder="Water Bottle" value="Water Bottle">
                        </div>
                        <div>
                            <label>Code:</label>
                            <input type="text" class="item-code" placeholder="BEV001" value="BEV001">
                        </div>
                        <div>
                            <label>Qty:</label>
                            <input type="number" class="item-qty" value="1" min="1">
                        </div>
                        <div>
                            <label>Price:</label>
                            <input type="number" class="item-price" value="1500" min="0">
                        </div>
                        <div>
                            <label>Total:</label>
                            <input type="number" class="item-total" value="1500" readonly style="background: #e9e9e9;">
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button onclick="addItem()">+ Add Item</button>
                <button class="btn-secondary" onclick="generateReceipt()">Generate Receipt</button>
                <button class="btn-secondary" onclick="window.print()">Print Receipt</button>
            </div>

            <div class="form-group" style="margin-top: 20px;">
                <label>Total Amount:</label>
                <input type="number" id="totalAmount" value="5000" readonly style="background: #e9e9e9; font-weight: bold; font-size: 16px;">
            </div>
        </div>

        <!-- Receipt Preview Section -->
        <div class="receipt-section">
            <h2 class="no-print" style="text-align: center; margin-bottom: 20px; font-family: Arial;">Receipt Preview</h2>
            <div id="receiptPreview"></div>
        </div>
    </div>

    <script>
        // Set today's date as default
        document.getElementById('receiptDate').valueAsDate = new Date();

        function calculateItemTotal(itemEntry) {
            const qty = parseFloat(itemEntry.querySelector('.item-qty').value) || 0;
            const price = parseFloat(itemEntry.querySelector('.item-price').value) || 0;
            const total = qty * price;
            itemEntry.querySelector('.item-total').value = total;
            calculateTotal();
        }

        function calculateTotal() {
            const items = document.querySelectorAll('.item-entry');
            let total = 0;
            items.forEach(item => {
                const amount = parseFloat(item.querySelector('.item-total').value) || 0;
                total += amount;
            });
            document.getElementById('totalAmount').value = total;
        }

        function addItem() {
            const container = document.getElementById('itemsContainer');
            const itemEntry = document.createElement('div');
            itemEntry.className = 'item-entry';
            itemEntry.innerHTML = `
                <div class="item-row">
                    <div>
                        <label>Item Name:</label>
                        <input type="text" class="item-name" placeholder="Item name">
                    </div>
                    <div>
                        <label>Code:</label>
                        <input type="text" class="item-code" placeholder="CODE01">
                    </div>
                    <div>
                        <label>Qty:</label>
                        <input type="number" class="item-qty" value="1" min="1">
                    </div>
                    <div>
                        <label>Price:</label>
                        <input type="number" class="item-price" value="0" min="0">
                    </div>
                    <div>
                        <label>Total:</label>
                        <input type="number" class="item-total" value="0" readonly style="background: #e9e9e9;">
                    </div>
                </div>
                <button class="btn-danger" onclick="this.parentElement.remove(); calculateTotal();" style="margin-top: 10px;">Remove Item</button>
            `;
            container.appendChild(itemEntry);

            // Add event listeners to new item
            itemEntry.querySelector('.item-qty').addEventListener('input', () => calculateItemTotal(itemEntry));
            itemEntry.querySelector('.item-price').addEventListener('input', () => calculateItemTotal(itemEntry));
        }

        // Add event listeners to initial items
        document.querySelectorAll('.item-entry').forEach(item => {
            item.querySelector('.item-qty').addEventListener('input', () => calculateItemTotal(item));
            item.querySelector('.item-price').addEventListener('input', () => calculateItemTotal(item));
        });

        function generateReceipt() {
            const receiptNo = document.getElementById('receiptNo').value;
            const date = new Date(document.getElementById('receiptDate').value).toLocaleDateString('en-GB');
            const time = document.getElementById('receiptTime').value;
            const cashier = document.getElementById('cashierName').value || '[Cashier Name]';
            const total = parseFloat(document.getElementById('totalAmount').value) || 0;

            // Get all items
            const items = [];
            document.querySelectorAll('.item-entry').forEach(entry => {
                const name = entry.querySelector('.item-name').value;
                const code = entry.querySelector('.item-code').value;
                const qty = entry.querySelector('.item-qty').value;
                const price = parseFloat(entry.querySelector('.item-price').value);
                const itemTotal = parseFloat(entry.querySelector('.item-total').value);
                if (name && code && qty && price) {
                    items.push({ name, code, qty, price, total: itemTotal });
                }
            });

            const itemCount = items.reduce((sum, item) => sum + parseInt(item.qty), 0);

            // Generate receipt HTML
            let itemsHTML = '';
            items.forEach(item => {
                itemsHTML += `
                    <tr>
                        <td>
                            ${item.name}<br>
                            <span class="item-code">${item.code}</span>
                        </td>
                        <td class="text-center">${item.qty}</td>
                        <td class="text-right">${item.price.toLocaleString()}</td>
                        <td class="text-right">${item.total.toLocaleString()}</td>
                    </tr>
                `;
            });

            const receiptHTML = `
                <div class="receipt">
                    <div class="receipt-header">
                        <div class="receipt-title">⛽ TORORO SERVICE STATION</div>
                        <div class="receipt-subtitle">SUPERMARKET & CONVENIENCE</div>
                        <div class="receipt-info">Tororo-Mbale Highway</div>
                        <div class="receipt-info">Eastern Uganda</div>
                        <div class="receipt-info">TIN: 1000XXXXXX</div>
                        <div class="receipt-info">Tel: +256-XXX-XXXXXX</div>
                    </div>

                    <div class="receipt-meta">
                        <div>Receipt: ${receiptNo}</div>
                        <div>${date}</div>
                    </div>
                    <div class="receipt-meta">
                        <div>Cashier: ${cashier}</div>
                        <div>${time}</div>
                    </div>

                    <div class="divider">═══════════════════════════════</div>

                    <table class="items-table">
                        <thead>
                            <tr>
                                <th>ITEM</th>
                                <th class="text-center">QTY</th>
                                <th class="text-right">PRICE</th>
                                <th class="text-right">TOTAL</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${itemsHTML}
                        </tbody>
                    </table>

                    <div class="divider">───────────────────────────────</div>

                    <table style="width: 100%; font-size: 9pt;">
                        <tr class="summary-row">
                            <td>SUBTOTAL:</td>
                            <td class="text-right">UGX ${total.toLocaleString()}</td>
                        </tr>
                        <tr>
                            <td>VAT (0%):</td>
                            <td class="text-right">UGX 0</td>
                        </tr>
                        <tr class="total-row">
                            <td>TOTAL:</td>
                            <td class="text-right">UGX ${total.toLocaleString()}</td>
                        </tr>
                    </table>

                    <div style="margin: 3mm 0; font-size: 9pt;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>CASH:</span>
                            <span>UGX ${total.toLocaleString()}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>CHANGE:</span>
                            <span>UGX 0</span>
                        </div>
                    </div>

                    <div class="items-count">Items Sold: ${itemCount}</div>

                    <div class="receipt-footer">
                        <div style="font-weight: bold; margin-bottom: 2mm;">⭐ THANK YOU ⭐</div>
                        <div style="font-size: 8pt;">FOR SHOPPING WITH US</div>
                        <div style="font-size: 8pt; margin-top: 2mm;">Safe Travels • Open 24/7</div>
                        <div style="font-size: 7pt; margin-top: 3mm;">Visit us again!</div>
                    </div>
                </div>
            `;

            document.getElementById('receiptPreview').innerHTML = receiptHTML;
        }

        // Generate initial receipt
        generateReceipt();
    </script>
</body>
</html>